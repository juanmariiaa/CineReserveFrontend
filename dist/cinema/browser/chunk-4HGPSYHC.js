import{c as ye}from"./chunk-HLTVQ2L5.js";import{a as we}from"./chunk-ZJD6WSQL.js";import"./chunk-F5X5MWHG.js";import{c as Te,d as De}from"./chunk-G7JMWQMS.js";import{a as M,b as fe,c as ge,d as v,e as xe}from"./chunk-AGEC3DRA.js";import{a as ee,b as te,c as ne,d as ie,e as ae,f as oe,g as re,h as me,i as ce,j as le,k as de,l as pe,m as se,n as ve,o as Ce}from"./chunk-STVDQ4GN.js";import"./chunk-MWWIUPHW.js";import"./chunk-4XF4NGEO.js";import"./chunk-WOS266EE.js";import{a as W,b as X}from"./chunk-JQMIOQDN.js";import{d as he,e as be}from"./chunk-LUQUAHTJ.js";import{b as Y,c as Z}from"./chunk-BAFH5YR6.js";import{D as Se,E as Me,t as q,v as _e,z as ue}from"./chunk-Z5HG6CM3.js";import"./chunk-ROUTVLYY.js";import{m as j,o as z,s as A}from"./chunk-A4IL2YBM.js";import{a as G,c as J,g as K}from"./chunk-PQBGQV3H.js";import{f as V,ga as Q,ha as U,i as H,l as L,y as N}from"./chunk-DWWDMUIZ.js";import{Db as c,Mb as a,Nb as i,Ob as f,Pb as p,Qb as s,Sb as h,Wb as b,Xb as g,_b as O,ac as w,bc as y,cb as P,cc as T,fb as r,fc as B,gc as o,hc as D,ic as _,jc as R,kb as S,pc as $,qa as C,qc as F,ra as x,rb as k,rc as E,tc as I,wb as m}from"./chunk-HQVUQXPE.js";var Pe=()=>[5,10,25,100],ke=e=>["/admin/screenings/edit",e];function Oe(e,t){e&1&&(a(0,"div",12),f(1,"mat-spinner",13),i())}function Be(e,t){e&1&&(a(0,"th",34),o(1,"ID"),i())}function Re(e,t){if(e&1&&(a(0,"td",35),o(1),i()),e&2){let n=t.$implicit;r(),_(" ",n.id," ")}}function $e(e,t){e&1&&(a(0,"th",36),o(1,"Poster"),i())}function Fe(e,t){if(e&1&&f(0,"img",40),e&2){let n=g().$implicit;O("alt","",n.movieTitle," poster"),c("src",n.moviePosterUrl,P)}}function Ve(e,t){e&1&&(a(0,"div",41)(1,"mat-icon"),o(2,"image_not_supported"),i()())}function He(e,t){if(e&1&&(a(0,"td",35)(1,"div",37),m(2,Fe,1,3,"img",38)(3,Ve,3,0,"div",39),i()()),e&2){let n=t.$implicit;r(2),c("ngIf",n.moviePosterUrl),r(),c("ngIf",!n.moviePosterUrl)}}function Le(e,t){e&1&&(a(0,"th",34),o(1,"Movie"),i())}function Ne(e,t){if(e&1&&(a(0,"td",35)(1,"div",42)(2,"span"),o(3),i()()()),e&2){let n=t.$implicit;r(3),D(n.movieTitle)}}function je(e,t){e&1&&(a(0,"th",34),o(1,"Room"),i())}function ze(e,t){if(e&1&&(a(0,"td",35),o(1),a(2,"span",43),o(3),i()()),e&2){let n=t.$implicit;r(),_(" Room ",n.roomNumber," "),r(2),R("(",n.availableSeats,"/",n.capacity," seats)")}}function Ae(e,t){e&1&&(a(0,"th",34),o(1,"Date"),i())}function Qe(e,t){if(e&1&&(a(0,"td",35),o(1),E(2,"date"),i()),e&2){let n=t.$implicit;r(),_(" ",I(2,1,n.startTime,"MMM d, y")," ")}}function Ue(e,t){e&1&&(a(0,"th",34),o(1,"Time"),i())}function qe(e,t){if(e&1&&(a(0,"td",35),o(1),E(2,"date"),i()),e&2){let n=t.$implicit;r(),_(" ",I(2,1,n.startTime,"h:mm a")," ")}}function Ge(e,t){e&1&&(a(0,"th",34),o(1,"Format"),i())}function Je(e,t){e&1&&(a(0,"span",45),o(1,"3D"),i())}function Ke(e,t){e&1&&(a(0,"span",45),o(1,"Subtitles"),i())}function We(e,t){if(e&1&&(a(0,"td",35)(1,"div",44)(2,"span",45),o(3),i(),m(4,Je,2,0,"span",46)(5,Ke,2,0,"span",46),i()()),e&2){let n=t.$implicit;r(3),D(n.format||"Digital"),r(),c("ngIf",n.is3D),r(),c("ngIf",n.hasSubtitles)}}function Xe(e,t){e&1&&(a(0,"th",36),o(1,"Actions"),i())}function Ye(e,t){if(e&1){let n=h();a(0,"td",35)(1,"button",47)(2,"mat-icon"),o(3,"edit"),i()(),a(4,"button",48),b("click",function(){let d=C(n).$implicit,u=g(2);return x(u.confirmDelete(d))}),a(5,"mat-icon"),o(6,"delete"),i()()()}if(e&2){let n=t.$implicit;r(),c("routerLink",F(1,ke,n.id))}}function Ze(e,t){e&1&&f(0,"tr",49)}function et(e,t){e&1&&f(0,"tr",50)}function tt(e,t){if(e&1&&(a(0,"tr",51)(1,"td",52),o(2),i()()),e&2){g();let n=B(5);r(2),_(' No screenings found matching "',n.value,'" ')}}function nt(e,t){if(e&1){let n=h();a(0,"div")(1,"mat-form-field",14)(2,"mat-label"),o(3,"Filter Screenings"),i(),a(4,"input",15,0),b("keyup",function(d){C(n);let u=g();return x(u.applyFilter(d))}),i(),a(6,"mat-icon",16),o(7,"search"),i()(),a(8,"div",17)(9,"table",18),p(10,19),m(11,Be,2,0,"th",20)(12,Re,2,1,"td",21),s(),p(13,22),m(14,$e,2,0,"th",23)(15,He,4,2,"td",21),s(),p(16,24),m(17,Le,2,0,"th",20)(18,Ne,4,1,"td",21),s(),p(19,25),m(20,je,2,0,"th",20)(21,ze,4,3,"td",21),s(),p(22,26),m(23,Ae,2,0,"th",20)(24,Qe,3,4,"td",21),s(),p(25,27),m(26,Ue,2,0,"th",20)(27,qe,3,4,"td",21),s(),p(28,28),m(29,Ge,2,0,"th",20)(30,We,6,3,"td",21),s(),p(31,29),m(32,Xe,2,0,"th",23)(33,Ye,7,3,"td",21),s(),m(34,Ze,1,0,"tr",30)(35,et,1,0,"tr",31)(36,tt,3,1,"tr",32),i(),f(37,"mat-paginator",33,1),i()()}if(e&2){let n=g();r(9),c("dataSource",n.dataSource),r(25),c("matHeaderRowDef",n.displayedColumns),r(),c("matRowDefColumns",n.displayedColumns),r(2),c("pageSizeOptions",$(4,Pe))}}var Ee=class e{constructor(t,n,l){this.screeningService=t;this.snackBar=n;this.dialog=l}screenings=[];loading=!0;displayedColumns=["id","poster","movie","room","date","time","format","actions"];dataSource=new se([]);paginator;sort;ngOnInit(){this.loadScreenings()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadScreenings(){this.loading=!0,this.screeningService.getAllScreeningsBasic().subscribe({next:t=>{this.screenings=t,this.dataSource.data=this.screenings,this.loading=!1},error:t=>{console.error("Error loading screenings:",t),this.snackBar.open("Error loading screenings. Please try again.","Close",{duration:5e3}),this.loading=!1}})}applyFilter(t){let n=t.target.value;this.dataSource.filter=n.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}confirmDelete(t){let n=t.movieTitle||"Unknown",l=t.roomNumber,d=new Date(t.startTime).toLocaleDateString(),u=new Date(t.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Ie=`Are you sure you want to delete screening for "${n}" in Room ${l} on ${d} at ${u}?`;confirm(Ie)&&this.deleteScreening(t.id)}deleteScreening(t){this.screeningService.deleteScreening(t).subscribe({next:()=>{this.snackBar.open("Screening deleted successfully","Close",{duration:3e3}),this.loadScreenings()},error:n=>{console.error("Error deleting screening:",n),this.snackBar.open("Error deleting screening. Please try again.","Close",{duration:5e3})}})}static \u0275fac=function(n){return new(n||e)(S(we),S(Y),S(Te))};static \u0275cmp=k({type:e,selectors:[["app-screening-management"]],viewQuery:function(n,l){if(n&1&&(w(v,5),w(M,5)),n&2){let d;y(d=T())&&(l.paginator=d.first),y(d=T())&&(l.sort=d.first)}},decls:18,vars:2,consts:[["input",""],["paginator",""],[1,"screening-management-container"],[1,"dashboard-title-container"],[1,"dashboard-title-marker"],[1,"dashboard-title"],[1,"action-bar"],["mat-raised-button","","routerLink","/admin/screenings/create",1,"accent-bg"],["mat-raised-button","","routerLink","/admin/dashboard"],[1,"table-card"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"loading-spinner"],[1,"accent-spinner"],["appearance","outline",1,"filter-field"],["matInput","","placeholder","Movie, room, date, etc.",3,"keyup"],["matSuffix",""],[1,"table-container"],["mat-table","","matSort","",1,"screening-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","poster"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","movie"],["matColumnDef","room"],["matColumnDef","date"],["matColumnDef","time"],["matColumnDef","format"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of screenings",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"poster-container"],["class","movie-poster",3,"src","alt",4,"ngIf"],["class","no-poster",4,"ngIf"],[1,"movie-poster",3,"src","alt"],[1,"no-poster"],[1,"movie-info"],[1,"seats-info"],[1,"format-badges"],[1,"format-badge"],["class","format-badge",4,"ngIf"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"routerLink"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","7",1,"mat-cell"]],template:function(n,l){n&1&&(a(0,"div",2)(1,"div",3),f(2,"div",4),a(3,"h1",5),o(4,"Screening Management"),i()(),a(5,"div",6)(6,"button",7)(7,"mat-icon"),o(8,"add"),i(),o(9," Schedule Screening "),i(),a(10,"button",8)(11,"mat-icon"),o(12,"arrow_back"),i(),o(13," Back to Dashboard "),i()(),a(14,"mat-card",9)(15,"mat-card-content"),m(16,Oe,2,0,"div",10)(17,nt,39,5,"div",11),i()()()),n&2&&(r(16),c("ngIf",l.loading),r(),c("ngIf",!l.loading))},dependencies:[L,V,H,N,K,G,J,A,z,j,U,Q,X,W,Z,pe,ee,ne,re,ie,te,me,ae,oe,ce,le,de,ge,M,fe,xe,v,be,he,Se,_e,ue,Me,De,q,Ce,ve,ye],styles:[".screening-management-container[_ngcontent-%COMP%]{width:100%;color:#fff;background-color:transparent}.dashboard-title-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:24px}.dashboard-title-marker[_ngcontent-%COMP%]{width:5px;height:30px;background-color:#ff6b6b;margin-right:10px}.dashboard-title[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-weight:500;margin:0}.action-bar[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end;margin-bottom:20px}.table-card[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden;background-color:#333!important}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px}.accent-spinner[_ngcontent-%COMP%]     circle{stroke:#ff6b6b!important}.filter-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.screening-table[_ngcontent-%COMP%]{width:100%}.movie-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.poster-container[_ngcontent-%COMP%]{width:60px;height:90px;display:flex;justify-content:center;align-items:center;overflow:hidden;border-radius:4px;background-color:#333;margin:8px auto}.movie-poster[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:4px;box-shadow:0 2px 4px #0003}.no-poster[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;color:#666}.format-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px}.format-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 6px;border-radius:12px;background-color:#ff6b6b33;color:#ff6b6b}.accent-bg[_ngcontent-%COMP%]{background-color:#ff6b6b!important;color:#fff!important}  .mat-mdc-card{background-color:#333!important;color:#fff!important}  .mat-mdc-form-field-label{color:#fff9!important}  .mat-mdc-input-element{color:#fff!important}  .mat-mdc-card-content{color:#fff!important}  .mat-sort-header-content{color:#fff!important}  .mat-mdc-paginator-range-label,   .mat-mdc-paginator-page-size-label{color:#fff!important}  .mat-mdc-select-value,   .mat-mdc-select-arrow{color:#fff!important}  .mat-mdc-table .mat-mdc-header-cell{color:#ffffffde!important;background-color:#2c2c2c!important}  .mat-mdc-table .mat-mdc-cell{color:#fff!important}  .mat-mdc-raised-button:not(.accent-bg){background-color:#444!important;color:#fff!important}  .mat-mdc-paginator{background-color:#2c2c2c!important}  .mat-mdc-icon-button{color:#ffffffb3!important}  .mat-mdc-icon-button:disabled{color:#ffffff4d!important}@media (max-width: 768px){.action-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end}.action-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:auto}}"]})};export{Ee as ScreeningManagementComponent};
