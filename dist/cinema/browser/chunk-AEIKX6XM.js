import{a as ut}from"./chunk-GRXH3MKR.js";import"./chunk-ZJD6WSQL.js";import{a as at,b as rt,c as mt,d as st,e as ft}from"./chunk-AGEC3DRA.js";import{a as J,b as K,c as Q,d as W,e as X,f as Y,g as Z,h as tt,i as et,j as it,k as nt,l as ot}from"./chunk-STVDQ4GN.js";import"./chunk-MWWIUPHW.js";import"./chunk-4XF4NGEO.js";import"./chunk-WOS266EE.js";import{a as N,b as U}from"./chunk-JQMIOQDN.js";import{d as _t,e as vt}from"./chunk-LUQUAHTJ.js";import{b as q,c as G}from"./chunk-BAFH5YR6.js";import{D as dt,E as pt,t as V,v as lt,z as ct}from"./chunk-Z5HG6CM3.js";import"./chunk-ROUTVLYY.js";import{m as B,o as F,s as $}from"./chunk-A4IL2YBM.js";import{a as A,c as j,g as z}from"./chunk-PQBGQV3H.js";import{f as I,ga as H,ha as L,i as P,l as O,y as R}from"./chunk-DWWDMUIZ.js";import{Db as m,Mb as o,Nb as n,Ob as p,Pb as c,Qb as d,Sb as x,Wb as b,Xb as s,cb as E,fb as r,fc as y,gc as a,hc as h,ic as f,kb as C,pc as D,qa as M,qc as S,ra as g,rb as w,rc as k,sc as T,wb as l}from"./chunk-HQVUQXPE.js";var gt=()=>[5,10,25,100],Ct=t=>["/movies",t],xt=t=>["/admin/movies/edit",t];function bt(t,e){t&1&&(o(0,"div",11),p(1,"mat-spinner",12),n())}function ht(t,e){t&1&&(o(0,"th",32),a(1,"ID"),n())}function St(t,e){if(t&1&&(o(0,"td",33),a(1),n()),t&2){let i=e.$implicit;r(),h(i.id)}}function Et(t,e){t&1&&(o(0,"th",34),a(1,"Poster"),n())}function wt(t,e){if(t&1&&p(0,"img",37),t&2){let i=s().$implicit;m("src",i.posterUrl,E)}}function yt(t,e){t&1&&(o(0,"div",38)(1,"mat-icon"),a(2,"image_not_supported"),n()())}function Dt(t,e){if(t&1&&(o(0,"td",33),l(1,wt,1,1,"img",35)(2,yt,3,0,"div",36),n()),t&2){let i=e.$implicit;r(),m("ngIf",i.posterUrl),r(),m("ngIf",!i.posterUrl)}}function kt(t,e){t&1&&(o(0,"th",32),a(1,"Title"),n())}function Tt(t,e){if(t&1&&(o(0,"td",33),a(1),n()),t&2){let i=e.$implicit;r(),h(i.title)}}function It(t,e){t&1&&(o(0,"th",32),a(1," Release Date "),n())}function Pt(t,e){if(t&1&&(o(0,"td",33),a(1),k(2,"date"),n()),t&2){let i=e.$implicit;r(),f(" ",T(2,1,i.releaseDate)," ")}}function Ot(t,e){t&1&&(o(0,"th",32),a(1," Duration "),n())}function Rt(t,e){if(t&1&&(o(0,"td",33),a(1),n()),t&2){let i=e.$implicit;r(),f(" ",i.durationMinutes," min ")}}function Bt(t,e){t&1&&(o(0,"th",32),a(1,"Rating"),n())}function Ft(t,e){if(t&1&&(o(0,"span",40)(1,"mat-icon",41),a(2,"star"),n(),a(3),n()),t&2){let i=s().$implicit;r(3),f(" ",i.voteAverage," ")}}function $t(t,e){t&1&&(o(0,"span"),a(1,"-"),n())}function Ht(t,e){if(t&1&&(o(0,"td",33),l(1,Ft,4,1,"span",39)(2,$t,2,0,"span",10),n()),t&2){let i=e.$implicit;r(),m("ngIf",i.voteAverage),r(),m("ngIf",!i.voteAverage)}}function Lt(t,e){t&1&&(o(0,"th",34),a(1,"Actions"),n())}function Vt(t,e){if(t&1){let i=x();o(0,"td",33)(1,"button",42)(2,"mat-icon"),a(3,"visibility"),n()(),o(4,"button",43)(5,"mat-icon"),a(6,"edit"),n()(),o(7,"button",44),b("click",function(){let v=M(i).$implicit,u=s(2);return g(u.confirmDelete(v))}),o(8,"mat-icon"),a(9,"delete"),n()()()}if(t&2){let i=e.$implicit;r(),m("routerLink",S(2,Ct,i.id)),r(3),m("routerLink",S(4,xt,i.id))}}function At(t,e){t&1&&p(0,"tr",45)}function jt(t,e){t&1&&p(0,"tr",46)}function zt(t,e){if(t&1&&(o(0,"tr",47)(1,"td",48),a(2),n()()),t&2){s();let i=y(5);r(2),f(' No movies found matching "',i.value,'" ')}}function Nt(t,e){if(t&1){let i=x();o(0,"div")(1,"mat-form-field",13)(2,"mat-label"),a(3,"Filter Movies"),n(),o(4,"input",14,0),b("keyup",function(v){M(i);let u=s();return g(u.applyFilter(v))}),n(),o(6,"mat-icon",15),a(7,"search"),n()(),o(8,"div",16)(9,"table",17),c(10,18),l(11,ht,2,0,"th",19)(12,St,2,1,"td",20),d(),c(13,21),l(14,Et,2,0,"th",22)(15,Dt,3,2,"td",20),d(),c(16,23),l(17,kt,2,0,"th",19)(18,Tt,2,1,"td",20),d(),c(19,24),l(20,It,2,0,"th",19)(21,Pt,3,3,"td",20),d(),c(22,25),l(23,Ot,2,0,"th",19)(24,Rt,2,1,"td",20),d(),c(25,26),l(26,Bt,2,0,"th",19)(27,Ht,3,2,"td",20),d(),c(28,27),l(29,Lt,2,0,"th",22)(30,Vt,10,6,"td",20),d(),l(31,At,1,0,"tr",28)(32,jt,1,0,"tr",29)(33,zt,3,1,"tr",30),n(),p(34,"mat-paginator",31),n()()}if(t&2){let i=s();r(9),m("dataSource",i.dataSource),r(22),m("matHeaderRowDef",i.displayedColumns),r(),m("matRowDefColumns",i.displayedColumns),r(2),m("pageSizeOptions",D(4,gt))}}var Mt=class t{constructor(e,i){this.movieService=e;this.snackBar=i}movies=[];loading=!0;displayedColumns=["id","poster","title","releaseDate","duration","rating","actions"];dataSource;ngOnInit(){this.loadMovies()}loadMovies(){this.loading=!0,this.movieService.getAllMovies().subscribe({next:e=>{this.movies=e,this.dataSource=this.movies,this.loading=!1},error:e=>{this.snackBar.open("Error loading movies: "+e.message,"Close",{duration:5e3}),this.loading=!1}})}applyFilter(e){let i=e.target.value;this.dataSource.filter=i.trim().toLowerCase()}confirmDelete(e){confirm(`Are you sure you want to delete the movie "${e.title}"?`)&&this.deleteMovie(e.id)}deleteMovie(e){this.movieService.deleteMovie(e).subscribe({next:()=>{this.snackBar.open("Movie deleted successfully","Close",{duration:3e3}),this.loadMovies()},error:i=>{this.snackBar.open("Error deleting movie: "+i.message,"Close",{duration:5e3})}})}static \u0275fac=function(i){return new(i||t)(C(ut),C(q))};static \u0275cmp=w({type:t,selectors:[["app-movie-management"]],decls:18,vars:2,consts:[["input",""],[1,"movie-management-container"],[1,"dashboard-title-container"],[1,"dashboard-title-marker"],[1,"dashboard-title"],[1,"action-bar"],["mat-raised-button","","routerLink","/admin/movies/add",1,"accent-bg"],["mat-raised-button","","routerLink","/admin/dashboard"],[1,"table-card"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"loading-spinner"],[1,"accent-spinner"],["appearance","outline",1,"filter-field"],["matInput","","placeholder","Title, genre, etc.",3,"keyup"],["matSuffix",""],[1,"table-container"],["mat-table","","matSort","",1,"movie-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","poster"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","title"],["matColumnDef","releaseDate"],["matColumnDef","duration"],["matColumnDef","rating"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of movies",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["alt","Poster","class","movie-poster",3,"src",4,"ngIf"],["class","no-poster",4,"ngIf"],["alt","Poster",1,"movie-poster",3,"src"],[1,"no-poster"],["class","rating",4,"ngIf"],[1,"rating"],[1,"star-icon"],["mat-icon-button","","color","primary","matTooltip","View Details",3,"routerLink"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"routerLink"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","7",1,"mat-cell"]],template:function(i,_){i&1&&(o(0,"div",1)(1,"div",2),p(2,"div",3),o(3,"h1",4),a(4,"Movie Management"),n()(),o(5,"div",5)(6,"button",6)(7,"mat-icon"),a(8,"add"),n(),a(9," Add Movie "),n(),o(10,"button",7)(11,"mat-icon"),a(12,"arrow_back"),n(),a(13," Back to Dashboard "),n()(),o(14,"mat-card",8)(15,"mat-card-content"),l(16,bt,2,0,"div",9)(17,Nt,35,5,"div",10),n()()()),i&2&&(r(16),m("ngIf",_.loading),r(),m("ngIf",!_.loading))},dependencies:[O,I,P,R,z,A,j,$,F,B,L,H,U,N,G,ot,J,Q,Z,W,K,tt,X,Y,et,it,nt,mt,at,rt,ft,st,vt,_t,dt,lt,ct,pt,V],styles:[".movie-management-container[_ngcontent-%COMP%]{width:100%;color:#fff}.dashboard-title-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:24px}.dashboard-title-marker[_ngcontent-%COMP%]{width:5px;height:30px;background-color:#ff6b6b;margin-right:10px}.dashboard-title[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-weight:500;margin:0}.action-bar[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end;margin-bottom:20px}.table-card[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden;background-color:#333!important}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px}.accent-spinner[_ngcontent-%COMP%]     circle{stroke:#ff6b6b!important}.filter-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.movie-table[_ngcontent-%COMP%]{width:100%}.movie-poster[_ngcontent-%COMP%]{width:50px;height:75px;object-fit:cover;border-radius:4px}.no-poster[_ngcontent-%COMP%]{width:50px;height:75px;display:flex;align-items:center;justify-content:center;background-color:#444;border-radius:4px}.star-icon[_ngcontent-%COMP%]{color:#ff6b6b!important;font-size:18px;height:18px;width:18px}.accent-bg[_ngcontent-%COMP%]{background-color:#ff6b6b!important;color:#fff!important}  .mat-mdc-card{background-color:#333!important;color:#fff!important}  .mat-mdc-form-field-label{color:#fff9!important}  .mat-mdc-input-element{color:#fff!important}  .mat-mdc-card-content{color:#fff!important}  .mat-sort-header-content{color:#fff!important}  .mat-mdc-paginator-range-label,   .mat-mdc-paginator-page-size-label{color:#fff!important}  .mat-mdc-select-value,   .mat-mdc-select-arrow{color:#fff!important}  .mat-mdc-table .mat-mdc-header-cell{color:#ffffffde!important;background-color:#2c2c2c!important}  .mat-mdc-table .mat-mdc-cell{color:#fff!important}  .mat-mdc-raised-button:not(.accent-bg){background-color:#444!important;color:#fff!important}  .mat-mdc-paginator{background-color:#2c2c2c!important}  .mat-mdc-icon-button{color:#ffffffb3!important}  .mat-mdc-icon-button:disabled{color:#ffffff4d!important}@media (max-width: 768px){.action-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end}.action-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:auto}}"]})};export{Mt as MovieManagementComponent};
