import{a as pe,b as ce,c as fe,d as se,e as ue}from"./chunk-4TP622C7.js";import"./chunk-GWUCYEDZ.js";import"./chunk-F7TWPAM3.js";import{a as le}from"./chunk-GRXH3MKR.js";import"./chunk-MS4AQ6UA.js";import{b as T}from"./chunk-HGZD7DPT.js";import{c as de}from"./chunk-HLTVQ2L5.js";import"./chunk-ZJD6WSQL.js";import{b as re}from"./chunk-MWWIUPHW.js";import"./chunk-4XF4NGEO.js";import"./chunk-WOS266EE.js";import{a as X,b as Y}from"./chunk-JQMIOQDN.js";import{d as ae,e as me}from"./chunk-LUQUAHTJ.js";import{b as Z,c as $}from"./chunk-BAFH5YR6.js";import{D as ne,E as oe,c as B,e as R,g as V,h as L,k as j,l as G,n as q,o as A,r as z,s as H,u as J,v as ee,w as te,z as ie}from"./chunk-Z5HG6CM3.js";import"./chunk-ROUTVLYY.js";import{o as F,s as w}from"./chunk-A4IL2YBM.js";import{a as K,c as Q,g as W}from"./chunk-PQBGQV3H.js";import{f as k,ga as N,ha as U,i as I,l as y,v as P,x as D,y as O}from"./chunk-DWWDMUIZ.js";import{Db as l,Mb as t,Nb as e,Ob as d,Sb as _,Wb as g,Xb as c,cb as M,fb as a,fc as C,gc as n,hc as h,ic as x,kb as f,qa as u,ra as v,rb as b,rc as E,sc as S,wb as s}from"./chunk-HQVUQXPE.js";function ge(r,i){r&1&&(t(0,"div",10),d(1,"mat-spinner",11),e())}function xe(r,i){if(r&1&&(t(0,"div",35),d(1,"img",36),e()),r&2){let o=c(2);a(),l("src",o.movie.posterUrl,M)("alt",o.movie.title)}}function Me(r,i){if(r&1&&(t(0,"p"),n(1),E(2,"date"),e()),r&2){let o=c(2);a(),x("Release date: ",S(2,1,o.movie.releaseDate),"")}}function be(r,i){if(r&1&&(t(0,"p"),n(1),e()),r&2){let o=c(2);a(),x("TMDB ID: ",o.movie.tmdbId,"")}}function _e(r,i){r&1&&(t(0,"mat-error"),n(1," Title is required "),e())}function Ce(r,i){r&1&&d(0,"mat-spinner",37)}function he(r,i){if(r&1){let o=_();t(0,"div")(1,"div",12),s(2,xe,2,2,"div",13),t(3,"div",14)(4,"h2"),n(5),e(),s(6,Me,3,3,"p",8)(7,be,2,1,"p",8),e()(),t(8,"mat-card",15)(9,"mat-card-content")(10,"form",16),g("ngSubmit",function(){u(o);let m=c();return v(m.onSubmit())}),t(11,"div",17)(12,"mat-form-field",18)(13,"mat-label"),n(14,"Title"),e(),d(15,"input",19),s(16,_e,2,0,"mat-error",8),e(),t(17,"mat-form-field",18)(18,"mat-label"),n(19,"Duration (minutes)"),e(),d(20,"input",20),e()(),t(21,"div",17)(22,"mat-form-field",18)(23,"mat-label"),n(24,"Release date"),e(),d(25,"input",21)(26,"mat-datepicker-toggle",22)(27,"mat-datepicker",null,0),e(),t(29,"mat-form-field",18)(30,"mat-label"),n(31,"Language"),e(),d(32,"input",23),e()(),t(33,"mat-form-field",24)(34,"mat-label"),n(35,"Description"),e(),d(36,"textarea",25),e(),t(37,"div",17)(38,"mat-form-field",18)(39,"mat-label"),n(40,"Poster URL"),e(),d(41,"input",26),e(),t(42,"mat-form-field",18)(43,"mat-label"),n(44,"Backdrop URL"),e(),d(45,"input",27),e()(),t(46,"div",17)(47,"mat-form-field",18)(48,"mat-label"),n(49,"Rating"),e(),d(50,"input",28),e(),t(51,"mat-form-field",18)(52,"mat-label"),n(53,"Director"),e(),d(54,"input",29),e()(),t(55,"mat-form-field",24)(56,"mat-label"),n(57,"Trailer URL"),e(),d(58,"input",30),e(),t(59,"div",31)(60,"button",32),g("click",function(){u(o);let m=c();return v(m.resetForm())}),n(61," Cancel Changes "),e(),t(62,"button",33)(63,"mat-icon"),n(64,"save"),e(),n(65," Save "),s(66,Ce,1,0,"mat-spinner",34),e()()()()()()}if(r&2){let o,p=C(28),m=c();a(2),l("ngIf",m.movie.posterUrl),a(3),h(m.movie.title),a(),l("ngIf",m.movie.releaseDate),a(),l("ngIf",m.movie.tmdbId),a(3),l("formGroup",m.movieForm),a(6),l("ngIf",(o=m.movieForm.get("title"))==null?null:o.hasError("required")),a(9),l("matDatepicker",p),a(),l("for",p),a(34),l("disabled",m.saving),a(2),l("disabled",m.movieForm.invalid||m.saving),a(4),l("ngIf",m.saving)}}function Ee(r,i){r&1&&(t(0,"div",38)(1,"mat-icon"),n(2,"movie_off"),e(),t(3,"h2"),n(4,"Pel\xEDcula no encontrada"),e(),t(5,"p"),n(6,"La pel\xEDcula que est\xE1s buscando no existe o ha sido eliminada."),e(),t(7,"button",39),n(8," Volver a la lista de pel\xEDculas "),e()())}var ve=class r{constructor(i,o,p,m,Se){this.route=i;this.router=o;this.movieService=p;this.fb=m;this.snackBar=Se;this.movieForm=this.createForm()}movie=null;movieForm;loading=!0;saving=!1;ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i?this.loadMovie(+i):this.loading=!1}createForm(){return this.fb.group({title:["",R.required],description:[""],durationMinutes:[null],releaseDate:[null],posterUrl:[""],backdropUrl:[""],rating:[""],language:[""],director:[""],trailerUrl:[""]})}loadMovie(i){this.loading=!0,this.movieService.getMovie(i).subscribe({next:o=>{this.movie=o,this.populateForm(o),this.loading=!1},error:o=>{this.snackBar.open("Error al cargar la pel\xEDcula: "+o.message,"Cerrar",{duration:5e3}),this.loading=!1}})}populateForm(i){this.movieForm.patchValue({title:i.title,description:i.description,durationMinutes:i.durationMinutes,releaseDate:i.releaseDate?new Date(i.releaseDate):null,posterUrl:i.posterUrl,backdropUrl:i.backdropUrl,rating:i.rating,language:i.language,director:i.director,trailerUrl:i.trailerUrl})}resetForm(){this.movie&&this.populateForm(this.movie)}onSubmit(){this.movieForm.invalid||(this.saving=!0,setTimeout(()=>{this.snackBar.open("Esta funcionalidad a\xFAn no est\xE1 implementada en el backend","Cerrar",{duration:5e3}),this.saving=!1},1e3))}static \u0275fac=function(o){return new(o||r)(f(P),f(D),f(le),f(H),f(Z))};static \u0275cmp=b({type:r,selectors:[["app-movie-edit"]],decls:13,vars:3,consts:[["picker",""],[1,"movie-edit-container"],[1,"dashboard-title-container"],[1,"dashboard-title-marker"],[1,"dashboard-title"],[1,"action-bar"],["mat-raised-button","","routerLink","/admin/movies"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],["class","not-found",4,"ngIf"],[1,"loading-spinner"],[1,"accent-spinner"],[1,"movie-header"],["class","movie-poster-container",4,"ngIf"],[1,"movie-info"],[1,"form-card"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"form-field"],["matInput","","formControlName","title","required",""],["matInput","","type","number","formControlName","durationMinutes"],["matInput","","formControlName","releaseDate",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","language"],["appearance","outline",1,"full-width"],["matInput","","formControlName","description","rows","5"],["matInput","","formControlName","posterUrl"],["matInput","","formControlName","backdropUrl"],["matInput","","formControlName","rating"],["matInput","","formControlName","director"],["matInput","","formControlName","trailerUrl"],[1,"form-actions"],["mat-button","","type","button",3,"click","disabled"],["mat-raised-button","","type","submit",1,"accent-bg",3,"disabled"],["diameter","20","class","button-spinner",4,"ngIf"],[1,"movie-poster-container"],[1,"movie-poster",3,"src","alt"],["diameter","20",1,"button-spinner"],[1,"not-found"],["mat-raised-button","","color","primary","routerLink","/admin/movies"]],template:function(o,p){o&1&&(t(0,"div",1)(1,"div",2),d(2,"div",3),t(3,"h1",4),n(4,"Edit Movie"),e()(),t(5,"div",5)(6,"button",6)(7,"mat-icon"),n(8,"arrow_back"),e(),n(9," Back to Movie List "),e()(),s(10,ge,2,0,"div",7)(11,he,67,11,"div",8)(12,Ee,9,0,"div",9),e()),o&2&&(a(10),l("ngIf",p.loading),a(),l("ngIf",!p.loading&&p.movie),a(),l("ngIf",!p.loading&&!p.movie))},dependencies:[y,k,I,O,J,j,B,G,V,L,z,q,A,W,K,Q,w,F,U,N,Y,X,$,me,ae,ne,ee,te,ie,oe,re,de,T,se,pe,ce,fe,ue],styles:[".movie-edit-container[_ngcontent-%COMP%]{width:100%;color:#fff;background-color:transparent}.dashboard-title-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:24px}.dashboard-title-marker[_ngcontent-%COMP%]{width:5px;height:30px;background-color:#ff6b6b;margin-right:10px}.dashboard-title[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-weight:500;margin:0}.action-bar[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end;margin-bottom:20px}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:50px}.accent-spinner[_ngcontent-%COMP%]     circle{stroke:#ff6b6b!important}.button-spinner[_ngcontent-%COMP%]{display:inline-block;margin-left:8px}.movie-header[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px;background-color:#333;border-radius:8px;padding:20px}.movie-poster-container[_ngcontent-%COMP%]{width:120px;height:180px;overflow:hidden;border-radius:4px}.movie-poster[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.movie-info[_ngcontent-%COMP%]{flex:1}.movie-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-top:0;margin-bottom:10px}.movie-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffb3;margin:5px 0}.form-card[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden;background-color:#333!important;margin-bottom:20px}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:16px}.form-field[_ngcontent-%COMP%]{flex:1}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.not-found[_ngcontent-%COMP%]{text-align:center;padding:50px 0;background-color:#333;border-radius:8px}.not-found[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px;color:#fff}.accent-bg[_ngcontent-%COMP%]{background-color:#ff6b6b!important;color:#fff!important}  .mat-mdc-card{background-color:#333!important;color:#fff!important}  .mat-mdc-form-field-label{color:#fff9!important}  .mat-mdc-input-element{color:#fff!important}  .mat-mdc-form-field-infix input,   .mat-mdc-form-field-infix textarea{color:#fff!important}  .mat-mdc-icon{color:#ffffffb3}  .mat-mdc-raised-button:not(.accent-bg){background-color:#444!important;color:#fff!important}  .mat-mdc-button{color:#ffffffb3!important}  .mat-mdc-datepicker-toggle{color:#ffffffb3!important}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}}"]})};export{ve as MovieEditComponent};
