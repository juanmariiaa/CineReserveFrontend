import{a as u,b as Ce,c as be,d as Me,e as Ae,f as _e,g as Se,h as ke,l as Pe,m as L,o as N}from"./chunk-NOALX45Q.js";import"./chunk-HGZD7DPT.js";import"./chunk-WOS266EE.js";import{C as Oe,a as ve}from"./chunk-EFKBGBUK.js";import"./chunk-ROUTVLYY.js";import{m as ye,s as A}from"./chunk-A4IL2YBM.js";import{A as ge,B as he,a as ce,ga as xe,ha as _,l as f,m as pe,n as le,q as de,r as se,s as fe,w as x,x as v,y as M,z as ue}from"./chunk-DWWDMUIZ.js";import{$ as z,Ca as X,Db as te,Eb as ne,F as U,Mb as r,Na as Z,Nb as i,Ob as s,Qa as $,Sb as oe,Wb as D,Yb as re,Zb as ie,ba as y,ca as V,ea as B,fb as h,ga as E,gc as m,ha as l,hc as ae,ib as q,ic as me,ka as G,kb as J,la as Y,lb as K,q as H,qa as I,ra as F,rb as d,sb as ee,wa as Q,za as W}from"./chunk-HQVUQXPE.js";var C=()=>{let e=l(u),n=l(v);return e.isLoggedIn()?!0:n.createUrlTree(["/login"])};var c=()=>{let e=l(u),n=l(v);return e.isAdmin()?!0:e.isLoggedIn()?n.createUrlTree(["/not-allowed"]):n.createUrlTree(["/login"])};var Le=["*"],S=class e{constructor(n){this.authService=n;let t=this.authService.getUserData();this.username=t?.username||""}sidenavOpen=!0;username="";toggleSidenav(){this.sidenavOpen=!this.sidenavOpen}logout(){this.authService.logout(),window.location.href="/"}static \u0275fac=function(t){return new(t||e)(J(u))};static \u0275cmp=d({type:e,selectors:[["app-admin-navbar"]],ngContentSelectors:Le,decls:68,vars:5,consts:[["sidenav",""],[1,"admin-toolbar"],["mat-icon-button","",1,"menu-icon",3,"click"],[1,"title"],[1,"spacer"],[1,"username"],["mat-icon-button","",1,"logout-btn",3,"click"],[1,"sidenav-container"],[1,"admin-sidenav",3,"mode","opened"],[1,"nav-list"],["routerLink","/admin/dashboard","routerLinkActive","active",1,"nav-item"],[1,"nav-icon-container"],["routerLink","/admin/movies","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/screenings","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/rooms","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/users","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/reservations","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/reports","routerLinkActive","active",1,"nav-item"],[1,"nav-divider"],["routerLink","/",1,"nav-item","return-link"],[1,"content-wrapper"]],template:function(t,o){if(t&1){let a=oe();re(),r(0,"mat-toolbar",1)(1,"button",2),D("click",function(){return I(a),F(o.toggleSidenav())}),r(2,"mat-icon"),m(3,"menu"),i()(),r(4,"span",3),m(5,"Admin Dashboard"),i(),s(6,"span",4),r(7,"span",5),m(8),i(),r(9,"button",6),D("click",function(){return I(a),F(o.logout())}),r(10,"mat-icon"),m(11,"exit_to_app"),i()()(),r(12,"mat-sidenav-container",7)(13,"mat-sidenav",8,0)(15,"div",9)(16,"a",10)(17,"div",11)(18,"mat-icon"),m(19,"dashboard"),i()(),r(20,"span"),m(21,"Dashboard"),i()(),r(22,"a",12)(23,"div",11)(24,"mat-icon"),m(25,"movie"),i()(),r(26,"span"),m(27,"Movies"),i()(),r(28,"a",13)(29,"div",11)(30,"mat-icon"),m(31,"theaters"),i()(),r(32,"span"),m(33,"Screenings"),i()(),r(34,"a",14)(35,"div",11)(36,"mat-icon"),m(37,"weekend"),i()(),r(38,"span"),m(39,"Rooms"),i()(),r(40,"a",15)(41,"div",11)(42,"mat-icon"),m(43,"people"),i()(),r(44,"span"),m(45,"Users"),i()(),r(46,"a",16)(47,"div",11)(48,"mat-icon"),m(49,"book_online"),i()(),r(50,"span"),m(51,"Reservations"),i()(),r(52,"a",17)(53,"div",11)(54,"mat-icon"),m(55,"bar_chart"),i()(),r(56,"span"),m(57,"Reports"),i()(),s(58,"div",18),r(59,"a",19)(60,"div",11)(61,"mat-icon"),m(62,"home"),i()(),r(63,"span"),m(64,"Back to Site"),i()()()(),r(65,"mat-sidenav-content")(66,"div",20),ie(67),i()()()}t&2&&(h(8),ae(o.username),h(5),te("mode","side")("opened",o.sidenavOpen),h(52),ne("margin-left",o.sidenavOpen?200:0,"px"))},dependencies:[f,M,ue,be,Ce,A,ye,_,xe,Se,Ae,_e,Me,ke,Pe],styles:[".admin-toolbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:100;box-shadow:0 2px 5px #00000080;height:64px;background-color:#272727!important;color:#fff}.title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;margin-left:8px;color:#fff}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.username[_ngcontent-%COMP%]{font-size:.9rem;margin-right:16px;color:#fff}.menu-icon[_ngcontent-%COMP%], .logout-btn[_ngcontent-%COMP%]{color:#fff}.sidenav-container[_ngcontent-%COMP%]{position:fixed;inset:64px 0 0;background-color:#3c3b34}.content-wrapper[_ngcontent-%COMP%]{min-height:calc(100vh - 64px);padding:20px;box-sizing:border-box}.admin-sidenav[_ngcontent-%COMP%]{width:200px;background-color:#272727;border-right:none;color:#fff}.nav-list[_ngcontent-%COMP%]{padding:16px 0}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;height:48px;padding:0 16px;margin:4px 8px;border-radius:4px;text-decoration:none;color:#fff;transition:background-color .2s}.nav-icon-container[_ngcontent-%COMP%]{margin-right:12px;display:flex;align-items:center;justify-content:center;width:24px}.nav-icon-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.nav-item[_ngcontent-%COMP%]:hover:not(.active){background-color:#ffffff0d}.nav-item.active[_ngcontent-%COMP%]{background-color:#ff6b6b;color:#fff;font-weight:500}.nav-item.active[_ngcontent-%COMP%]   .nav-icon-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.nav-divider[_ngcontent-%COMP%]{height:1px;background-color:#444;margin:8px 16px}.return-link[_ngcontent-%COMP%]{color:#ff6b6b!important}.return-link[_ngcontent-%COMP%]   .nav-icon-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff6b6b}  .mat-toolbar{background-color:#272727!important;color:#fff!important}  .mat-drawer-container{background-color:#3c3b34!important;color:#fff!important}  .mat-drawer{background-color:#272727!important;color:#fff!important}  .mat-mdc-list-item{color:#fff!important}"]})};var k=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=d({type:e,selectors:[["app-admin-layout"]],decls:4,vars:0,consts:[[1,"admin-layout"],[1,"admin-content"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"app-admin-navbar")(2,"div",1),s(3,"router-outlet"),i()()())},dependencies:[f,x,S],styles:['@charset "UTF-8";.admin-layout[_ngcontent-%COMP%]{min-height:100vh;background-color:#3c3b34;color:#fff}.admin-content[_ngcontent-%COMP%]{padding:20px;margin-top:64px;background-color:#3c3b34;color:#fff;min-height:calc(100vh - 64px);box-sizing:border-box}  body{background-color:#3c3b34!important;color:#fff!important;margin:0;padding:0}  .mat-mdc-card{background-color:#333!important;color:#fff!important;border-radius:8px!important;overflow:hidden!important}  .mat-mdc-card-content{color:#fff!important}  .admin-dashboard-container{padding:0!important;margin:0!important;background-color:transparent!important}  .mat-mdc-form-field{color:#fff!important}  .mat-mdc-text-field-wrapper{background-color:#333!important}  .mat-mdc-form-field-label{color:#fff9!important}  .mat-mdc-input-element{color:#fff!important}  .mat-mdc-select-value,   .mat-mdc-select-arrow{color:#fff!important}  .mat-mdc-paginator{background-color:#333!important;color:#fff!important}  .mat-mdc-tab-group,   .mat-mdc-tab-header,   .mat-mdc-tab-body-wrapper{background-color:#333!important;color:#fff!important}  .mat-mdc-tab .mdc-tab__text-label{color:#fff!important}  .mat-mdc-tab-header-pagination-chevron{border-color:#fff!important}  .mat-mdc-table{background-color:#333!important}  .mat-mdc-row:hover .mat-mdc-cell{background-color:#444!important}  .accent-color{color:#ff6b6b!important}  .accent-bg{background-color:#ff6b6b!important}']})};var we=[{path:"admin",component:k,children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",loadComponent:()=>import("./chunk-X3YRHSAZ.js").then(e=>e.AdminDashboardComponent),canActivate:[c]},{path:"movies",loadComponent:()=>import("./chunk-DU6JT5G6.js").then(e=>e.MovieManagementComponent),canActivate:[c]},{path:"movies/edit/:id",loadComponent:()=>import("./chunk-GRWTU3BN.js").then(e=>e.MovieEditComponent),canActivate:[c]},{path:"movies/add",loadComponent:()=>import("./chunk-ZERG2V36.js").then(e=>e.MovieCreateComponent),canActivate:[c]},{path:"rooms",loadComponent:()=>import("./chunk-IG3MWM7F.js").then(e=>e.RoomManagementComponent),canActivate:[c]},{path:"rooms/create",loadComponent:()=>import("./chunk-25E526TG.js").then(e=>e.RoomCreateComponent),canActivate:[c]},{path:"screenings",loadComponent:()=>import("./chunk-S6VD6KYD.js").then(e=>e.ScreeningManagementComponent),canActivate:[c]},{path:"screenings/create",loadComponent:()=>import("./chunk-SHQ3FZNW.js").then(e=>e.ScreeningCreateComponent),canActivate:[c]},{path:"screenings/edit/:id",loadComponent:()=>import("./chunk-SHQ3FZNW.js").then(e=>e.ScreeningCreateComponent),canActivate:[c]},{path:"reservations",loadComponent:()=>import("./chunk-O6U5HXXF.js").then(e=>e.ReservationManagementComponent),canActivate:[c]},{path:"users",loadComponent:()=>import("./chunk-QD7W3XAS.js").then(e=>e.UserManagementComponent),canActivate:[c]}],canActivate:[c]}];var Re=[{path:"",loadComponent:()=>import("./chunk-LGWO45DH.js").then(e=>e.HomeComponent)},{path:"not-allowed",loadComponent:()=>import("./chunk-XRXRTFBI.js").then(e=>e.NotAllowedComponent)},{path:"reserve/:id",loadComponent:()=>import("./chunk-G5TJ2Z7H.js").then(e=>e.ReservationComponent),canActivate:[C]},{path:"dashboard",loadComponent:()=>import("./chunk-X3YRHSAZ.js").then(e=>e.AdminDashboardComponent),canActivate:[C,c]},{path:"movies",loadComponent:()=>import("./chunk-PKCGK6ZW.js").then(e=>e.PublicMovieListComponent)},{path:"movies/:id",loadComponent:()=>import("./chunk-ITYTXHRB.js").then(e=>e.PublicMovieDetailComponent)},{path:"my-reservations",loadComponent:()=>import("./chunk-UZ36L4S2.js").then(e=>e.UserReservationsComponent),canActivate:[C]},{path:"payment/success",loadComponent:()=>import("./chunk-4C367ISE.js").then(e=>e.PaymentSuccessComponent),canActivate:[C]},{path:"payment/cancel",loadComponent:()=>import("./chunk-LUIE72VR.js").then(e=>e.PaymentCancelComponent),canActivate:[C]},...we,{path:"**",loadComponent:()=>import("./chunk-3EBEAZO7.js").then(e=>e.NotFoundComponent)}];var Ne="@",Te=(()=>{class e{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=l(Q);loadingSchedulerFn=l(je,{optional:!0});_engine;constructor(t,o,a,p,g){this.doc=t,this.delegate=o,this.zone=a,this.animationType=p,this.moduleImpl=g}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-QQODHRO7.js").then(a=>a),o;return this.loadingSchedulerFn?o=this.loadingSchedulerFn(t):o=t(),o.catch(a=>{throw new z(5300,!1)}).then(({\u0275createEngine:a,\u0275AnimationRendererFactory:p})=>{this._engine=a(this.animationType,this.doc);let g=new p(this.delegate,this._engine,this.zone);return this.delegate=g,g})}createRenderer(t,o){let a=this.delegate.createRenderer(t,o);if(a.\u0275type===0)return a;typeof a.throwOnSyntheticProps=="boolean"&&(a.throwOnSyntheticProps=!1);let p=new j(a);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(g=>{let Fe=g.createRenderer(t,o);p.use(Fe),this.scheduler??=this.injector.get(W,null,{optional:!0}),this.scheduler?.notify(10)}).catch(g=>{p.use(a)}),p}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(t){this._engine?.flush(),this.delegate.componentReplaced?.(t)}static \u0275fac=function(o){K()};static \u0275prov=y({token:e,factory:e.\u0275fac})}return e})(),j=class{delegate;replay=[];\u0275type=1;constructor(n){this.delegate=n}use(n){if(this.delegate=n,this.replay!==null){for(let t of this.replay)t(n);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}get destroyNode(){return this.delegate.destroyNode}appendChild(n,t){this.delegate.appendChild(n,t)}insertBefore(n,t,o,a){this.delegate.insertBefore(n,t,o,a)}removeChild(n,t,o){this.delegate.removeChild(n,t,o)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,o,a){this.delegate.setAttribute(n,t,o,a)}removeAttribute(n,t,o){this.delegate.removeAttribute(n,t,o)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,o,a){this.delegate.setStyle(n,t,o,a)}removeStyle(n,t,o){this.delegate.removeStyle(n,t,o)}setProperty(n,t,o){this.shouldReplay(t)&&this.replay.push(a=>a.setProperty(n,t,o)),this.delegate.setProperty(n,t,o)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,o,a){return this.shouldReplay(t)&&this.replay.push(p=>p.listen(n,t,o,a)),this.delegate.listen(n,t,o,a)}shouldReplay(n){return this.replay!==null&&n.startsWith(Ne)}},je=new B("");function Ee(e="animations"){return $("NgAsyncAnimations"),G([{provide:q,useFactory:(n,t,o)=>new Te(n,t,o,e),deps:[ce,pe,X]},{provide:Z,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var P=class e{constructor(n,t){this.authService=n;this.router=t}intercept(n,t){let o=this.authService.getToken();return o&&(n=n.clone({setHeaders:{Authorization:`Bearer ${o}`}})),t.handle(n).pipe(U(a=>(a.status===401?n.url.includes("/auth/signin")||n.url.includes("/auth/google")||n.url.includes("/auth/signup")||(console.log("No autorizado: Sesi\xF3n expirada o token inv\xE1lido"),this.authService.logout(),this.router.navigate(["/login"])):a.status===403&&console.log("Acceso prohibido: No tienes permiso para esta acci\xF3n"),H(()=>a))))}static \u0275fac=function(t){return new(t||e)(E(u),E(v))};static \u0275prov=y({token:e,factory:e.\u0275fac})};var O=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=ee({type:e});static \u0275inj=V({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:L.PROVIDER_ID,provider:new L(ve.googleClientId,{prompt:"select_account",oneTapEnabled:!1})}],onError:n=>{console.error("Google OAuth error:",n)}}}],imports:[f,N,N]})};var Ie={providers:[ge(Re,he()),Ee(),se(fe()),{provide:de,useClass:P,multi:!0},{provide:Oe,useValue:{appearance:"outline"}},Y(O)]};var w=class e{get currentYear(){return new Date().getFullYear()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=d({type:e,selectors:[["app-footer"]],decls:16,vars:1,consts:[[1,"app-footer"],[1,"footer-container"],[1,"footer-brand"],[1,"brand-name"],[1,"copyright"],[1,"footer-links"],["routerLink","/privacy-policy",1,"footer-link"],["routerLink","/terms",1,"footer-link"],["routerLink","/faq",1,"footer-link"],["routerLink","/contact",1,"footer-link"]],template:function(t,o){t&1&&(r(0,"footer",0)(1,"div",1)(2,"div",2)(3,"h3",3),m(4,"CineReserve"),i(),r(5,"p",4),m(6),i()(),r(7,"div",5)(8,"a",6),m(9,"Privacy Policy"),i(),r(10,"a",7),m(11,"Terms of Use"),i(),r(12,"a",8),m(13,"FAQ"),i(),r(14,"a",9),m(15,"Contact"),i()()()()),t&2&&(h(6),me("\xA9 ",o.currentYear," CineReserve. All rights reserved."))},dependencies:[f,M,_,A],styles:[".app-footer[_ngcontent-%COMP%]{background-color:#3c3b34;color:#ffffffd9;padding:1.5rem 2rem;margin-top:auto;border-top:1px solid rgba(255,255,255,.1);border-radius:16px 16px 0 0;box-shadow:0 -4px 10px #0003}.footer-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1600px;margin:0 auto;width:95%}.footer-brand[_ngcontent-%COMP%]{display:flex;flex-direction:column}.brand-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 .5rem;color:#fff}.copyright[_ngcontent-%COMP%]{font-size:.85rem;margin:0;color:#ffffffb3}.footer-links[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.footer-link[_ngcontent-%COMP%]{color:#fffc;text-decoration:none;font-size:.95rem;transition:all .2s ease}.footer-link[_ngcontent-%COMP%]:hover{color:#ff6b6b;text-decoration:none}@media (max-width: 768px){.app-footer[_ngcontent-%COMP%]{padding:1.5rem 1rem}.footer-container[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.footer-brand[_ngcontent-%COMP%]{margin-bottom:1.25rem}.footer-links[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;gap:1rem 2rem}}@media (max-width: 480px){.footer-links[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}"]})};var R=class e{title="CineReserveFrontend";static \u0275fac=function(t){return new(t||e)};static \u0275cmp=d({type:e,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"app-container"],[1,"content"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1),s(2,"router-outlet"),i(),s(3,"app-footer"),i())},dependencies:[x,w],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;background-color:#3c3b34;color:#fff}.content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background-color:#3c3b34}"]})};le(R,Ie).catch(e=>console.error(e));
