import{a as u,b as Ce,c as be,d as Me,e as _e,f as Ae,g as Se,h as ke,l as Pe,m as L,o as N}from"./chunk-JJT6K3XQ.js";import"./chunk-E2NKI5YT.js";import"./chunk-NSEFZZEN.js";import{C as Oe,a as ve}from"./chunk-2FAWVZHA.js";import"./chunk-SZLBBELY.js";import{m as ye,s as _}from"./chunk-NRVZBHM6.js";import{A as ge,B as he,a as ce,ga as xe,ha as A,l as f,m as pe,n as le,q as se,r as de,s as fe,w as x,x as v,y as M,z as ue}from"./chunk-BTJY3BD6.js";import{$ as z,Ca as X,Db as te,Eb as oe,F as U,Mb as i,Na as Z,Nb as r,Ob as d,Qa as $,Sb as ne,Wb as D,Yb as ie,Zb as re,ba as y,ca as V,ea as G,fb as h,ga as E,gc as m,ha as l,hc as ae,ib as q,ic as me,ka as B,kb as J,la as Y,lb as K,q as H,qa as I,ra as F,rb as s,sb as ee,wa as Q,za as W}from"./chunk-HKKO7SBW.js";var C=()=>{let e=l(u),t=l(v);return e.isLoggedIn()?!0:t.createUrlTree(["/login"])};var c=()=>{let e=l(u),t=l(v);return e.isAdmin()?!0:e.isLoggedIn()?t.createUrlTree(["/not-allowed"]):t.createUrlTree(["/login"])};var Le=["*"],S=class e{constructor(t){this.authService=t;let o=this.authService.getUserData();this.username=o?.username||""}sidenavOpen=!0;username="";toggleSidenav(){this.sidenavOpen=!this.sidenavOpen}logout(){this.authService.logout(),window.location.href="/"}static \u0275fac=function(o){return new(o||e)(J(u))};static \u0275cmp=s({type:e,selectors:[["app-admin-navbar"]],ngContentSelectors:Le,decls:68,vars:5,consts:[["sidenav",""],[1,"admin-toolbar"],["mat-icon-button","",1,"menu-icon",3,"click"],[1,"title"],[1,"spacer"],[1,"username"],["mat-icon-button","",1,"logout-btn",3,"click"],[1,"sidenav-container"],[1,"admin-sidenav",3,"mode","opened"],[1,"nav-list"],["routerLink","/admin/dashboard","routerLinkActive","active",1,"nav-item"],[1,"nav-icon-container"],["routerLink","/admin/movies","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/screenings","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/rooms","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/users","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/reservations","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/reports","routerLinkActive","active",1,"nav-item"],[1,"nav-divider"],["routerLink","/",1,"nav-item","return-link"],[1,"content-wrapper"]],template:function(o,n){if(o&1){let a=ne();ie(),i(0,"mat-toolbar",1)(1,"button",2),D("click",function(){return I(a),F(n.toggleSidenav())}),i(2,"mat-icon"),m(3,"menu"),r()(),i(4,"span",3),m(5,"Admin Dashboard"),r(),d(6,"span",4),i(7,"span",5),m(8),r(),i(9,"button",6),D("click",function(){return I(a),F(n.logout())}),i(10,"mat-icon"),m(11,"exit_to_app"),r()()(),i(12,"mat-sidenav-container",7)(13,"mat-sidenav",8,0)(15,"div",9)(16,"a",10)(17,"div",11)(18,"mat-icon"),m(19,"dashboard"),r()(),i(20,"span"),m(21,"Dashboard"),r()(),i(22,"a",12)(23,"div",11)(24,"mat-icon"),m(25,"movie"),r()(),i(26,"span"),m(27,"Movies"),r()(),i(28,"a",13)(29,"div",11)(30,"mat-icon"),m(31,"theaters"),r()(),i(32,"span"),m(33,"Screenings"),r()(),i(34,"a",14)(35,"div",11)(36,"mat-icon"),m(37,"weekend"),r()(),i(38,"span"),m(39,"Rooms"),r()(),i(40,"a",15)(41,"div",11)(42,"mat-icon"),m(43,"people"),r()(),i(44,"span"),m(45,"Users"),r()(),i(46,"a",16)(47,"div",11)(48,"mat-icon"),m(49,"book_online"),r()(),i(50,"span"),m(51,"Reservations"),r()(),i(52,"a",17)(53,"div",11)(54,"mat-icon"),m(55,"bar_chart"),r()(),i(56,"span"),m(57,"Reports"),r()(),d(58,"div",18),i(59,"a",19)(60,"div",11)(61,"mat-icon"),m(62,"home"),r()(),i(63,"span"),m(64,"Back to Site"),r()()()(),i(65,"mat-sidenav-content")(66,"div",20),re(67),r()()()}o&2&&(h(8),ae(n.username),h(5),te("mode","side")("opened",n.sidenavOpen),h(52),oe("margin-left",n.sidenavOpen?200:0,"px"))},dependencies:[f,M,ue,be,Ce,_,ye,A,xe,Se,_e,Ae,Me,ke,Pe],styles:[".admin-toolbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:100;box-shadow:0 2px 5px #00000080;height:64px;background-color:#272727!important;color:#fff}.title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;margin-left:8px;color:#fff}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.username[_ngcontent-%COMP%]{font-size:.9rem;margin-right:16px;color:#fff}.menu-icon[_ngcontent-%COMP%], .logout-btn[_ngcontent-%COMP%]{color:#fff}.sidenav-container[_ngcontent-%COMP%]{position:fixed;inset:64px 0 0;background-color:#3c3b34}.content-wrapper[_ngcontent-%COMP%]{min-height:calc(100vh - 64px);padding:20px;box-sizing:border-box}.admin-sidenav[_ngcontent-%COMP%]{width:200px;background-color:#272727;border-right:none;color:#fff}.nav-list[_ngcontent-%COMP%]{padding:16px 0}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;height:48px;padding:0 16px;margin:4px 8px;border-radius:4px;text-decoration:none;color:#fff;transition:background-color .2s}.nav-icon-container[_ngcontent-%COMP%]{margin-right:12px;display:flex;align-items:center;justify-content:center;width:24px}.nav-icon-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.nav-item[_ngcontent-%COMP%]:hover:not(.active){background-color:#ffffff0d}.nav-item.active[_ngcontent-%COMP%]{background-color:#ff6b6b;color:#fff;font-weight:500}.nav-item.active[_ngcontent-%COMP%]   .nav-icon-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.nav-divider[_ngcontent-%COMP%]{height:1px;background-color:#444;margin:8px 16px}.return-link[_ngcontent-%COMP%]{color:#ff6b6b!important}.return-link[_ngcontent-%COMP%]   .nav-icon-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff6b6b}  .mat-toolbar{background-color:#272727!important;color:#fff!important}  .mat-drawer-container{background-color:#3c3b34!important;color:#fff!important}  .mat-drawer{background-color:#272727!important;color:#fff!important}  .mat-mdc-list-item{color:#fff!important}"]})};var k=class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=s({type:e,selectors:[["app-admin-layout"]],decls:4,vars:0,consts:[[1,"admin-layout"],[1,"admin-content"]],template:function(o,n){o&1&&(i(0,"div",0)(1,"app-admin-navbar")(2,"div",1),d(3,"router-outlet"),r()()())},dependencies:[f,x,S],styles:['@charset "UTF-8";.admin-layout[_ngcontent-%COMP%]{min-height:100vh;background-color:#3c3b34;color:#fff}.admin-content[_ngcontent-%COMP%]{padding:20px;margin-top:64px;background-color:#3c3b34;color:#fff;min-height:calc(100vh - 64px);box-sizing:border-box}  body{background-color:#3c3b34!important;color:#fff!important;margin:0;padding:0}  .mat-mdc-card{background-color:#333!important;color:#fff!important;border-radius:8px!important;overflow:hidden!important}  .mat-mdc-card-content{color:#fff!important}  .admin-dashboard-container{padding:0!important;margin:0!important;background-color:transparent!important}  .mat-mdc-form-field{color:#fff!important}  .mat-mdc-text-field-wrapper{background-color:#333!important}  .mat-mdc-form-field-label{color:#fff9!important}  .mat-mdc-input-element{color:#fff!important}  .mat-mdc-select-value,   .mat-mdc-select-arrow{color:#fff!important}  .mat-mdc-paginator{background-color:#333!important;color:#fff!important}  .mat-mdc-tab-group,   .mat-mdc-tab-header,   .mat-mdc-tab-body-wrapper{background-color:#333!important;color:#fff!important}  .mat-mdc-tab .mdc-tab__text-label{color:#fff!important}  .mat-mdc-tab-header-pagination-chevron{border-color:#fff!important}  .mat-mdc-table{background-color:#333!important}  .mat-mdc-row:hover .mat-mdc-cell{background-color:#444!important}  .accent-color{color:#ff6b6b!important}  .accent-bg{background-color:#ff6b6b!important}']})};var we=[{path:"admin",component:k,children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",loadComponent:()=>import("./chunk-XRUMRKU4.js").then(e=>e.AdminDashboardComponent),canActivate:[c]},{path:"movies",loadComponent:()=>import("./chunk-7AB74ZBF.js").then(e=>e.MovieManagementComponent),canActivate:[c]},{path:"movies/edit/:id",loadComponent:()=>import("./chunk-7Q4X6MQC.js").then(e=>e.MovieEditComponent),canActivate:[c]},{path:"movies/add",loadComponent:()=>import("./chunk-OBRTGAG6.js").then(e=>e.MovieCreateComponent),canActivate:[c]},{path:"rooms",loadComponent:()=>import("./chunk-FV54R75C.js").then(e=>e.RoomManagementComponent),canActivate:[c]},{path:"rooms/create",loadComponent:()=>import("./chunk-GCFAO5QS.js").then(e=>e.RoomCreateComponent),canActivate:[c]},{path:"screenings",loadComponent:()=>import("./chunk-YLBHB5VG.js").then(e=>e.ScreeningManagementComponent),canActivate:[c]},{path:"screenings/create",loadComponent:()=>import("./chunk-CCCVMY37.js").then(e=>e.ScreeningCreateComponent),canActivate:[c]},{path:"screenings/edit/:id",loadComponent:()=>import("./chunk-CCCVMY37.js").then(e=>e.ScreeningCreateComponent),canActivate:[c]},{path:"reservations",loadComponent:()=>import("./chunk-JIILARSV.js").then(e=>e.ReservationManagementComponent),canActivate:[c]},{path:"users",loadComponent:()=>import("./chunk-KPHGBHW4.js").then(e=>e.UserManagementComponent),canActivate:[c]}],canActivate:[c]}];var Re=[{path:"",loadComponent:()=>import("./chunk-OLHVX4IW.js").then(e=>e.HomeComponent)},{path:"not-allowed",loadComponent:()=>import("./chunk-IH62S7AM.js").then(e=>e.NotAllowedComponent)},{path:"reserve/:id",loadComponent:()=>import("./chunk-ZTPGZDPT.js").then(e=>e.ReservationComponent),canActivate:[C]},{path:"dashboard",loadComponent:()=>import("./chunk-XRUMRKU4.js").then(e=>e.AdminDashboardComponent),canActivate:[C,c]},{path:"movies",loadComponent:()=>import("./chunk-QGBJMH7Y.js").then(e=>e.PublicMovieListComponent)},{path:"movies/:id",loadComponent:()=>import("./chunk-Q3IWQEGC.js").then(e=>e.PublicMovieDetailComponent)},{path:"my-reservations",loadComponent:()=>import("./chunk-XLV5GPXL.js").then(e=>e.UserReservationsComponent),canActivate:[C]},{path:"payment/success",loadComponent:()=>import("./chunk-5NLE3C7H.js").then(e=>e.PaymentSuccessComponent),canActivate:[C]},{path:"payment/cancel",loadComponent:()=>import("./chunk-ROJFU55D.js").then(e=>e.PaymentCancelComponent),canActivate:[C]},...we,{path:"**",loadComponent:()=>import("./chunk-VGW5WDYD.js").then(e=>e.NotFoundComponent)}];var Ne="@",Te=(()=>{class e{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=l(Q);loadingSchedulerFn=l(je,{optional:!0});_engine;constructor(o,n,a,p,g){this.doc=o,this.delegate=n,this.zone=a,this.animationType=p,this.moduleImpl=g}ngOnDestroy(){this._engine?.flush()}loadImpl(){let o=()=>this.moduleImpl??import("./chunk-CMAIFMVN.js").then(a=>a),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(o):n=o(),n.catch(a=>{throw new z(5300,!1)}).then(({\u0275createEngine:a,\u0275AnimationRendererFactory:p})=>{this._engine=a(this.animationType,this.doc);let g=new p(this.delegate,this._engine,this.zone);return this.delegate=g,g})}createRenderer(o,n){let a=this.delegate.createRenderer(o,n);if(a.\u0275type===0)return a;typeof a.throwOnSyntheticProps=="boolean"&&(a.throwOnSyntheticProps=!1);let p=new j(a);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(g=>{let Fe=g.createRenderer(o,n);p.use(Fe),this.scheduler??=this.injector.get(W,null,{optional:!0}),this.scheduler?.notify(10)}).catch(g=>{p.use(a)}),p}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(o){this._engine?.flush(),this.delegate.componentReplaced?.(o)}static \u0275fac=function(n){K()};static \u0275prov=y({token:e,factory:e.\u0275fac})}return e})(),j=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let o of this.replay)o(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,o){return this.delegate.createElement(t,o)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,o){this.delegate.appendChild(t,o)}insertBefore(t,o,n,a){this.delegate.insertBefore(t,o,n,a)}removeChild(t,o,n){this.delegate.removeChild(t,o,n)}selectRootElement(t,o){return this.delegate.selectRootElement(t,o)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,o,n,a){this.delegate.setAttribute(t,o,n,a)}removeAttribute(t,o,n){this.delegate.removeAttribute(t,o,n)}addClass(t,o){this.delegate.addClass(t,o)}removeClass(t,o){this.delegate.removeClass(t,o)}setStyle(t,o,n,a){this.delegate.setStyle(t,o,n,a)}removeStyle(t,o,n){this.delegate.removeStyle(t,o,n)}setProperty(t,o,n){this.shouldReplay(o)&&this.replay.push(a=>a.setProperty(t,o,n)),this.delegate.setProperty(t,o,n)}setValue(t,o){this.delegate.setValue(t,o)}listen(t,o,n,a){return this.shouldReplay(o)&&this.replay.push(p=>p.listen(t,o,n,a)),this.delegate.listen(t,o,n,a)}shouldReplay(t){return this.replay!==null&&t.startsWith(Ne)}},je=new G("");function Ee(e="animations"){return $("NgAsyncAnimations"),B([{provide:q,useFactory:(t,o,n)=>new Te(t,o,n,e),deps:[ce,pe,X]},{provide:Z,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var P=class e{constructor(t,o){this.authService=t;this.router=o}intercept(t,o){let n=this.authService.getToken();return n&&(t=t.clone({setHeaders:{Authorization:`Bearer ${n}`}})),o.handle(t).pipe(U(a=>(a.status===401?t.url.includes("/auth/signin")||t.url.includes("/auth/google")||t.url.includes("/auth/signup")||(console.log("No autorizado: Sesi\xF3n expirada o token inv\xE1lido"),this.authService.logout(),this.router.navigate(["/login"])):a.status===403&&console.log("Acceso prohibido: No tienes permiso para esta acci\xF3n"),H(()=>a))))}static \u0275fac=function(o){return new(o||e)(E(u),E(v))};static \u0275prov=y({token:e,factory:e.\u0275fac})};var O=class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=ee({type:e});static \u0275inj=V({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:L.PROVIDER_ID,provider:new L(ve.googleClientId,{oneTapEnabled:!1,prompt:"select_account",scopes:"email profile",use_fedcm_for_prompt:!1,ux_mode:"popup",revoke_on_logout:!0,plugin_name:"CineReserve"})}],onError:t=>{t&&t.error!=="popup_closed_by_user"&&console.warn("Google OAuth warning:",t.error||t)}}}],imports:[f,N,N]})};var Ie={providers:[ge(Re,he()),Ee(),de(fe()),{provide:se,useClass:P,multi:!0},{provide:Oe,useValue:{appearance:"outline"}},Y(O)]};var w=class e{get currentYear(){return new Date().getFullYear()}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=s({type:e,selectors:[["app-footer"]],decls:16,vars:1,consts:[[1,"app-footer"],[1,"footer-container"],[1,"footer-brand"],[1,"brand-name"],[1,"copyright"],[1,"footer-links"],["routerLink","/privacy-policy",1,"footer-link"],["routerLink","/terms",1,"footer-link"],["routerLink","/faq",1,"footer-link"],["routerLink","/contact",1,"footer-link"]],template:function(o,n){o&1&&(i(0,"footer",0)(1,"div",1)(2,"div",2)(3,"h3",3),m(4,"CineReserve"),r(),i(5,"p",4),m(6),r()(),i(7,"div",5)(8,"a",6),m(9,"Privacy Policy"),r(),i(10,"a",7),m(11,"Terms of Use"),r(),i(12,"a",8),m(13,"FAQ"),r(),i(14,"a",9),m(15,"Contact"),r()()()()),o&2&&(h(6),me("\xA9 ",n.currentYear," CineReserve. All rights reserved."))},dependencies:[f,M,A,_],styles:[".app-footer[_ngcontent-%COMP%]{background-color:#3c3b34;color:#ffffffd9;padding:1.5rem 2rem;margin-top:auto;border-top:1px solid rgba(255,255,255,.1);border-radius:16px 16px 0 0;box-shadow:0 -4px 10px #0003}.footer-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1600px;margin:0 auto;width:95%}.footer-brand[_ngcontent-%COMP%]{display:flex;flex-direction:column}.brand-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 .5rem;color:#fff}.copyright[_ngcontent-%COMP%]{font-size:.85rem;margin:0;color:#ffffffb3}.footer-links[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.footer-link[_ngcontent-%COMP%]{color:#fffc;text-decoration:none;font-size:.95rem;transition:all .2s ease}.footer-link[_ngcontent-%COMP%]:hover{color:#ff6b6b;text-decoration:none}@media (max-width: 768px){.app-footer[_ngcontent-%COMP%]{padding:1.5rem 1rem}.footer-container[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.footer-brand[_ngcontent-%COMP%]{margin-bottom:1.25rem}.footer-links[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;gap:1rem 2rem}}@media (max-width: 480px){.footer-links[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}"]})};var R=class e{title="CineReserveFrontend";static \u0275fac=function(o){return new(o||e)};static \u0275cmp=s({type:e,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"app-container"],[1,"content"]],template:function(o,n){o&1&&(i(0,"div",0)(1,"div",1),d(2,"router-outlet"),r(),d(3,"app-footer"),r())},dependencies:[x,w],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;background-color:#3c3b34;color:#fff}.content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background-color:#3c3b34}"]})};le(R,Ie).catch(e=>console.error(e));
