<div class="movie-list-page">
  <app-navbar></app-navbar>

  <div class="movie-list-container">
    <!-- Page title -->
    <div class="page-header">
      <h1 class="page-title">Movies & Showtimes</h1>
    </div>

    <!-- Trending Movies Section -->
    <app-trending-movies [movies]="trendingMovies" *ngIf="!loading">
    </app-trending-movies>

    <!-- Search and Filters Section -->
    <app-movie-filters
      [filterOptions]="filterOptions"
      [searchControl]="searchControl"
      [genreControl]="genreControl"
      [durationControl]="durationControl"
      [ratingControl]="ratingControl"
      [timeFrameControl]="timeFrameControl"
      [sortControl]="sortControl"
      (resetFilters)="resetFilters()"
    >
    </app-movie-filters>

    <!-- Loading spinner -->
    <div *ngIf="loading" class="loading-spinner">
      <mat-spinner></mat-spinner>
    </div>

    <!-- No movies message -->
    <div *ngIf="!loading && filteredMovies.length === 0" class="no-movies">
      <p>
        <mat-icon>movie_filter</mat-icon>
        No movies found matching your criteria. Try adjusting your filters.
      </p>
      <button mat-raised-button color="accent" (click)="resetFilters()">
        Reset All Filters
      </button>
    </div>

    <!-- Movies grid view -->
    <div
      *ngIf="!loading && filteredMovies.length > 0"
      class="movies-grid-section"
    >
      <div class="movies-grid">
        <div *ngFor="let movie of filteredMovies" class="movie-card-container">
          <app-movie-card [movie]="movie"></app-movie-card>
        </div>
      </div>
    </div>
  </div>
</div>
